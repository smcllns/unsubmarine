var app=function(){"use strict";function t(){}function e(t){return t()}function n(){return Object.create(null)}function r(t){t.forEach(e)}function o(t){return"function"==typeof t}function i(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}let c,u;function a(e,...n){if(null==e)return t;const r=e.subscribe(...n);return r.unsubscribe?()=>r.unsubscribe():r}function s(t){let e;return a(t,(t=>e=t))(),e}function l(t,e,n){t.$$.on_destroy.push(a(e,n))}function f(t,e,n,r){return t[1]&&r?function(t,e){for(const n in e)t[n]=e[n];return t}(n.ctx.slice(),t[1](r(e))):n.ctx}function h(t,e){t.appendChild(e)}function d(t,e,n){t.insertBefore(e,n||null)}function p(t){t.parentNode.removeChild(t)}function m(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function y(t){return document.createElement(t)}function v(t){return document.createTextNode(t)}function g(){return v(" ")}function b(t,e,n,r){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n,r)}function x(t){return function(e){return e.preventDefault(),t.call(this,e)}}function w(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function $(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function k(t){u=t}const _=[],S=[],L=[],j=[],E=Promise.resolve();let A=!1;function O(t){L.push(t)}const P=new Set;let T=0;function C(){const t=u;do{for(;T<_.length;){const t=_[T];T++,k(t),N(t.$$)}for(k(null),_.length=0,T=0;S.length;)S.pop()();for(let t=0;t<L.length;t+=1){const e=L[t];P.has(e)||(P.add(e),e())}L.length=0}while(_.length);for(;j.length;)j.pop()();A=!1,P.clear(),k(t)}function N(t){if(null!==t.fragment){t.update(),r(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(O)}}const q=new Set;let I;function M(){I={r:0,c:[],p:I}}function B(){I.r||r(I.c),I=I.p}function U(t,e){t&&t.i&&(q.delete(t),t.i(e))}function G(t,e,n,r){if(t&&t.o){if(q.has(t))return;q.add(t),I.c.push((()=>{q.delete(t),r&&(n&&t.d(1),r())})),t.o(e)}else r&&r()}function R(t){t&&t.c()}function F(t,n,i,c){const{fragment:u,on_mount:a,on_destroy:s,after_update:l}=t.$$;u&&u.m(n,i),c||O((()=>{const n=a.map(e).filter(o);s?s.push(...n):r(n),t.$$.on_mount=[]})),l.forEach(O)}function z(t,e){const n=t.$$;null!==n.fragment&&(r(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function V(t,e){-1===t.$$.dirty[0]&&(_.push(t),A||(A=!0,E.then(C)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function D(e,o,i,c,a,s,l,f=[-1]){const h=u;k(e);const d=e.$$={fragment:null,ctx:null,props:s,update:t,not_equal:a,bound:n(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(o.context||(h?h.$$.context:[])),callbacks:n(),dirty:f,skip_bound:!1,root:o.target||h.$$.root};l&&l(d.root);let m=!1;if(d.ctx=i?i(e,o.props||{},((t,n,...r)=>{const o=r.length?r[0]:n;return d.ctx&&a(d.ctx[t],d.ctx[t]=o)&&(!d.skip_bound&&d.bound[t]&&d.bound[t](o),m&&V(e,t)),n})):[],d.update(),m=!0,r(d.before_update),d.fragment=!!c&&c(d.ctx),o.target){if(o.hydrate){const t=function(t){return Array.from(t.childNodes)}(o.target);d.fragment&&d.fragment.l(t),t.forEach(p)}else d.fragment&&d.fragment.c();o.intro&&U(e.$$.fragment),F(e,o.target,o.anchor,o.customElement),C()}k(h)}class H{$destroy(){z(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}function Y(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Q(t){return function(t){if(Array.isArray(t))return Y(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return Y(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Y(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function J(t,e,n,r,o,i,c){try{var u=t[i](c),a=u.value}catch(t){return void n(t)}u.done?e(a):Promise.resolve(a).then(r,o)}function K(t){return function(){var e=this,n=arguments;return new Promise((function(r,o){var i=t.apply(e,n);function c(t){J(i,r,o,c,u,"next",t)}function u(t){J(i,r,o,c,u,"throw",t)}c(void 0)}))}}var W={exports:{}},X={exports:{}};!function(t){function e(n){return t.exports=e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t.exports.__esModule=!0,t.exports.default=t.exports,e(n)}t.exports=e,t.exports.__esModule=!0,t.exports.default=t.exports}(X),function(t){var e=X.exports.default;function n(){
/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */
t.exports=n=function(){return r},t.exports.__esModule=!0,t.exports.default=t.exports;var r={},o=Object.prototype,i=o.hasOwnProperty,c="function"==typeof Symbol?Symbol:{},u=c.iterator||"@@iterator",a=c.asyncIterator||"@@asyncIterator",s=c.toStringTag||"@@toStringTag";function l(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,n){return t[e]=n}}function f(t,e,n,r){var o=e&&e.prototype instanceof p?e:p,i=Object.create(o.prototype),c=new L(r||[]);return i._invoke=function(t,e,n){var r="suspendedStart";return function(o,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw i;return E()}for(n.method=o,n.arg=i;;){var c=n.delegate;if(c){var u=k(c,n);if(u){if(u===d)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var a=h(t,e,n);if("normal"===a.type){if(r=n.done?"completed":"suspendedYield",a.arg===d)continue;return{value:a.arg,done:n.done}}"throw"===a.type&&(r="completed",n.method="throw",n.arg=a.arg)}}}(t,n,c),i}function h(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}r.wrap=f;var d={};function p(){}function m(){}function y(){}var v={};l(v,u,(function(){return this}));var g=Object.getPrototypeOf,b=g&&g(g(j([])));b&&b!==o&&i.call(b,u)&&(v=b);var x=y.prototype=p.prototype=Object.create(v);function w(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function $(t,n){function r(o,c,u,a){var s=h(t[o],t,c);if("throw"!==s.type){var l=s.arg,f=l.value;return f&&"object"==e(f)&&i.call(f,"__await")?n.resolve(f.__await).then((function(t){r("next",t,u,a)}),(function(t){r("throw",t,u,a)})):n.resolve(f).then((function(t){l.value=t,u(l)}),(function(t){return r("throw",t,u,a)}))}a(s.arg)}var o;this._invoke=function(t,e){function i(){return new n((function(n,o){r(t,e,n,o)}))}return o=o?o.then(i,i):i()}}function k(t,e){var n=t.iterator[e.method];if(void 0===n){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,k(t,e),"throw"===e.method))return d;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return d}var r=h(n,t.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,d;var o=r.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,d):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,d)}function _(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function S(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function L(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(_,this),this.reset(!0)}function j(t){if(t){var e=t[u];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,r=function e(){for(;++n<t.length;)if(i.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return r.next=r}}return{next:E}}function E(){return{value:void 0,done:!0}}return m.prototype=y,l(x,"constructor",y),l(y,"constructor",m),m.displayName=l(y,s,"GeneratorFunction"),r.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},r.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,y):(t.__proto__=y,l(t,s,"GeneratorFunction")),t.prototype=Object.create(x),t},r.awrap=function(t){return{__await:t}},w($.prototype),l($.prototype,a,(function(){return this})),r.AsyncIterator=$,r.async=function(t,e,n,o,i){void 0===i&&(i=Promise);var c=new $(f(t,e,n,o),i);return r.isGeneratorFunction(e)?c:c.next().then((function(t){return t.done?t.value:c.next()}))},w(x),l(x,s,"Generator"),l(x,u,(function(){return this})),l(x,"toString",(function(){return"[object Generator]"})),r.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},r.values=j,L.prototype={constructor:L,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!t)for(var e in this)"t"===e.charAt(0)&&i.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(n,r){return c.type="throw",c.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r],c=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var u=i.call(o,"catchLoc"),a=i.call(o,"finallyLoc");if(u&&a){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(u){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!a)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&i.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var c=o?o.completion:{};return c.type=t,c.arg=e,o?(this.method="next",this.next=o.finallyLoc,d):this.complete(c)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),d},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),S(n),d}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;S(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:j(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),d}},r}t.exports=n,t.exports.__esModule=!0,t.exports.default=t.exports}(W);var Z=W.exports(),tt=Z;try{regeneratorRuntime=Z}catch(t){"object"==typeof globalThis?globalThis.regeneratorRuntime=Z:Function("r","regeneratorRuntime = r")(Z)}function et(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function nt(t){this.wrapped=t}function rt(t){var e,n;function r(e,n){try{var i=t[e](n),c=i.value,u=c instanceof nt;Promise.resolve(u?c.wrapped:c).then((function(t){u?r("return"===e?"return":"next",t):o(i.done?"return":"normal",t)}),(function(t){r("throw",t)}))}catch(t){o("throw",t)}}function o(t,o){switch(t){case"return":e.resolve({value:o,done:!0});break;case"throw":e.reject(o);break;default:e.resolve({value:o,done:!1})}(e=e.next)?r(e.key,e.arg):n=null}this._invoke=function(t,o){return new Promise((function(i,c){var u={key:t,arg:o,resolve:i,reject:c,next:null};n?n=n.next=u:(e=n=u,r(t,o))}))},"function"!=typeof t.return&&(this.return=void 0)}function ot(){var t,e,n,r,o,i,c=(i=document.querySelectorAll('[data-tooltip="Older"]:not([aria-disabled="true"])'),{nextBtn:Array.from(i).filter((function(t){return t.offsetParent}))[0]}).nextBtn,u=document.querySelector("[role=main]"),a=Array.from(u.querySelectorAll("a")).filter((function(t){return/unsubscribe/i.test(t.textContent)||/unsubscribe/i.test(t.href)})),s=a.length>0&&a[0],l=u.querySelector("[idlink]"),f="unsubscribe"===(null==l||null===(t=l.textContent)||void 0===t?void 0:t.toLowerCase())&&l,h=null===(e=u.querySelectorAll("span .go")[0])||void 0===e||null===(n=e.textContent)||void 0===n?void 0:n.replace(/[<>]/g,""),d=null===(r=u.querySelectorAll("[data-thread-perm-id]")[0])||void 0===r?void 0:r.textContent,p=null===(o=u.querySelectorAll('[alt*=":"][title*=":"]')[0])||void 0===o?void 0:o.textContent,m=window.location.href;return{sender:h,subject:d,when:p,unsubLink:s.href,unsubBtn:f,nextBtn:c,url:m}}function it(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return ct(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ct(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,c=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return c=t.done,t},e:function(t){u=!0,i=t},f:function(){try{c||null==n.return||n.return()}finally{if(u)throw i}}}}function ct(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}rt.prototype["function"==typeof Symbol&&Symbol.asyncIterator||"@@asyncIterator"]=function(){return this},rt.prototype.next=function(t){return this._invoke("next",t)},rt.prototype.throw=function(t){return this._invoke("throw",t)},rt.prototype.return=function(t){return this._invoke("return",t)};var ut=function(){return new Promise((function(t,e){var n=new MutationObserver((function(e){var r,o=it(e);try{for(o.s();!(r=o.n()).done;){var i=r.value;"attributes"===i.type&&"main"===i.target.getAttribute("role")&&(console.log("gmail page change detected"),n.disconnect(),t(i.target))}}catch(t){o.e(t)}finally{o.f()}}));n.observe(document,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["role"]})}))},at=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.killSwitch=!1,this.prevRun}var e,n,r,o;return e=t,n=[{key:"start",value:function(){var t,e=this;return(t=tt.mark((function t(){var n;return tt.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.prevRun=void 0;case 1:if(!e.killSwitch){t.next=4;break}return t.abrupt("return");case 4:return n=void 0,t.prev=5,t.next=8,new nt(e.run());case 8:n=t.sent,t.next=15;break;case 11:return t.prev=11,t.t0=t.catch(5),console.log("err"),t.abrupt("return");case 15:if(!n.skipIncrement){t.next=17;break}return t.abrupt("continue",1);case 17:if(!n.stopped){t.next=19;break}return t.abrupt("return");case 19:return t.next=21,n;case 21:e.prevRun=n,t.next=1;break;case 24:case"end":return t.stop()}}),t,null,[[5,11]])})),function(){return new rt(t.apply(this,arguments))})()}},{key:"run",value:(o=K(tt.mark((function t(){var e=this;return tt.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("started run()"),t.abrupt("return",new Promise(function(){var t=K(tt.mark((function t(n,r){var o,i;return tt.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(Array.from(document.querySelectorAll("[role=main] [role=row]")).filter((function(t){return t.offsetParent})).length>0)){t.next=6;break}return Array.from(document.querySelectorAll("[role=main] [role=row]")).filter((function(t){return t.offsetParent}))[0].click(),t.next=5,ut();case 5:return t.abrupt("return",n({skipIncrement:!0}));case 6:if(!(Array.from(document.querySelectorAll("[role=main] [role=listitem]")).filter((function(t){return t.offsetParent})).length>0)){t.next=15;break}if((i=ot()).url!==(null===(o=e.prevRun)||void 0===o?void 0:o.url)){t.next=10;break}return t.abrupt("return",n({stopped:!0}));case 10:if(!i.nextBtn){t.next=14;break}return i.nextBtn.click(),t.next=14,ut();case 14:return t.abrupt("return",n(i));case 15:r();case 16:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()));case 2:case"end":return t.stop()}}),t)}))),function(){return o.apply(this,arguments)})}],n&&et(e.prototype,n),r&&et(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();const st=[];function lt(e,n=t){let r;const o=new Set;function c(t){if(i(e,t)&&(e=t,r)){const t=!st.length;for(const t of o)t[1](),st.push(t,e);if(t){for(let t=0;t<st.length;t+=2)st[t][0](st[t+1]);st.length=0}}}return{set:c,update:function(t){c(t(e))},subscribe:function(i,u=t){const a=[i,u];return o.add(a),1===o.size&&(r=n(c)||t),i(e),()=>{o.delete(a),0===o.size&&(r(),r=null)}}}}function ft(t){return ft="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ft(t)}var ht=function(){var t=lt(!1),e=t.subscribe,n=t.set,r=t.update,o=[!1,"start","progress","review"];return{subscribe:e,moveToNextView:function(t){switch(!0){case o.includes(t):n(t);break;case Number.isInteger(t)&&t<o.length:n(o[t]);break;case void 0===ft(t):r((function(t){return o[o.indexOf(t)+1]}));break;default:console.log("can't switch to viewState",t)}},reset:function(){return n(!1)}}}(),dt=lt(0),pt=lt([]),mt=lt(!1),yt=lt(50);function vt(t){var e,n,r,o=2;for("undefined"!=typeof Symbol&&(n=Symbol.asyncIterator,r=Symbol.iterator);o--;){if(n&&null!=(e=t[n]))return e.call(t);if(r&&null!=(e=t[r]))return new gt(e.call(t));n="@@asyncIterator",r="@@iterator"}throw new TypeError("Object is not async iterable")}function gt(t){function e(t){if(Object(t)!==t)return Promise.reject(new TypeError(t+" is not an object."));var e=t.done;return Promise.resolve(t.value).then((function(t){return{value:t,done:e}}))}return gt=function(t){this.s=t,this.n=t.next},gt.prototype={s:null,n:null,next:function(){return e(this.n.apply(this.s,arguments))},return:function(t){var n=this.s.return;return void 0===n?Promise.resolve({value:t,done:!0}):e(n.apply(this.s,arguments))},throw:function(t){var n=this.s.return;return void 0===n?Promise.reject(t):e(n.apply(this.s,arguments))}},new gt(t)}function bt(){!function(){kt.apply(this,arguments)}(),ht.moveToNextView("progress")}function xt(){mt.set(!0),ht.moveToNextView(!1)}function wt(){mt.set(!0),ht.moveToNextView("review")}function $t(t){"Escape"===t.key&&xt()}function kt(){return(kt=K(tt.mark((function t(){var e,n,r,o,i,c,u,a,l,f;return tt.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e=new at,dt.set(0),pt.set([]),mt.set(!1),n=s(yt),r=0,o=mt.subscribe((function(t){return e.killSwitch=t})),i=!1,c=!1,t.prev=9,a=function(){var t=f.value;return dt.update((function(t){return t+1})),t.unsubLink&&pt.update((function(e){return r=e.length+1,[].concat(Q(e),[t])})),console.log("result from unsub generator",r,n,t),t.error||e.killSwitch?(console.log("hitting stop due to error/killswitch"),"break"):r>=n?(console.log("hitting stop due to max limit hit"),"break"):void 0},l=vt(e.start());case 12:return t.next=14,l.next();case 14:if(!(i=!(f=t.sent).done)){t.next=21;break}if("break"!==a()){t.next=18;break}return t.abrupt("break",21);case 18:i=!1,t.next=12;break;case 21:t.next=27;break;case 23:t.prev=23,t.t0=t.catch(9),c=!0,u=t.t0;case 27:if(t.prev=27,t.prev=28,!i||null==l.return){t.next=32;break}return t.next=32,l.return();case 32:if(t.prev=32,!c){t.next=35;break}throw u;case 35:return t.finish(32);case 36:return t.finish(27);case 37:o(),wt();case 39:case"end":return t.stop()}}),t,null,[[9,23,27,37],[28,,32,36]])})))).apply(this,arguments)}function _t(t){let e,n,r,o,i,u,a,s,l,m,v,$,k,_,S,L,j;const E=t[2].default,A=function(t,e,n,r){if(t){const o=f(t,e,n,r);return t[0](o)}}(E,t,t[1],null);return{c(){var f,h;e=y("div"),n=y("div"),r=y("div"),o=g(),i=y("div"),i.textContent="âœ–",u=g(),a=y("header"),s=y("img"),m=g(),v=y("h1"),v.textContent="Unsubmarine",$=g(),k=y("p"),k.textContent="Bulk Unsubscribe in Gmail",_=g(),A&&A.c(),w(r,"class","Dialog__Shadow svelte-105czqc"),w(i,"class","Dialog__Close svelte-105czqc"),w(s,"alt","unsubmarine logo"),f=s.src,h=l=t[0],c||(c=document.createElement("a")),c.href=h,f!==c.href&&w(s,"src",l),w(s,"width","64px"),w(s,"height","auto"),w(s,"class","mx-auto pb-2"),w(v,"class","text-3xl font-bold"),w(a,"class","pb-2 mx-auto text-center"),w(n,"class","Dialog flex flex-col justify-center p-4 mx-4 bg-white text-black pointer-events-auto relative rounded-t-md w-full max-w-xl svelte-105czqc"),w(e,"class","Dialog__Container flex flex-1 flex-col-reverse pointer-events-none items-end justify-start svelte-105czqc")},m(t,c){d(t,e,c),h(e,n),h(n,r),h(n,o),h(n,i),h(n,u),h(n,a),h(a,s),h(a,m),h(a,v),h(a,$),h(a,k),h(n,_),A&&A.m(n,null),S=!0,L||(j=b(i,"click",x(xt)),L=!0)},p(t,[e]){A&&A.p&&(!S||2&e)&&function(t,e,n,r,o,i){if(o){const c=f(e,n,r,i);t.p(c,o)}}(A,E,t,t[1],S?function(t,e,n,r){if(t[2]&&r){const o=t[2](r(n));if(void 0===e.dirty)return o;if("object"==typeof o){const t=[],n=Math.max(e.dirty.length,o.length);for(let r=0;r<n;r+=1)t[r]=e.dirty[r]|o[r];return t}return e.dirty|o}return e.dirty}(E,t[1],e,null):function(t){if(t.ctx.length>32){const e=[],n=t.ctx.length/32;for(let t=0;t<n;t++)e[t]=-1;return e}return-1}(t[1]),null)},i(t){S||(U(A,t),S=!0)},o(t){G(A,t),S=!1},d(t){t&&p(e),A&&A.d(t),L=!1,j()}}}function St(t,e,n){let{$$slots:r={},$$scope:o}=e,i=chrome.runtime.getURL("images/icon128.png");return t.$$set=t=>{"$$scope"in t&&n(1,o=t.$$scope)},[i,o,r]}class Lt extends H{constructor(t){super(),D(this,t,St,_t,i,{})}}function jt(e){let n,r,o,i,c,u,a,s;return{c(){n=y("div"),r=y("p"),r.textContent="Unsubmarine automates the process of clicking through emails to find\n      unsubscribe links, and presents them in one list so you can choose what to\n      bulk unsubscribe from.",o=g(),i=y("div"),i.innerHTML='<h3 class="text-lg font-semibold">Start Search</h3>',c=g(),u=y("p"),u.innerHTML='Unsubmarine is an open source client-only browser extension so your data\n      doesn&#39;t leave your browser, and it has no persistent storage so it doesn&#39;t\n      remember anything after a page refresh. It does nothing until you click\n      Start. <a href="https://github.com/smcllns/unsubmarine">Code on github</a>.',w(r,"class","py-4 text-center"),w(i,"class","Btn Primary p-4 mb-4"),w(u,"class","pb-4 text-sm"),w(n,"class","mx-auto")},m(t,l){d(t,n,l),h(n,r),h(n,o),h(n,i),h(n,c),h(n,u),a||(s=b(i,"click",x(e[0])),a=!0)},p:t,d(t){t&&p(n),a=!1,s()}}}function Et(t){let e,n;return e=new Lt({props:{$$slots:{default:[jt]},$$scope:{ctx:t}}}),{c(){R(e.$$.fragment)},m(t,r){F(e,t,r),n=!0},p(t,[n]){const r={};8&n&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){n||(U(e.$$.fragment,t),n=!0)},o(t){G(e.$$.fragment,t),n=!1},d(t){z(e,t)}}}function At(t){return[async t=>{ht.moveToNextView(!1),await async function(){const t=document.querySelector("[name=q]"),e=t.closest("form"),n=e.style.backgroundColor;e.style.backgroundColor="tomato",e.style.color="white",await function(t,e){return new Promise(((n,r)=>{e.split("").forEach(((r,o)=>{setTimeout((()=>{t.value=e.slice(0,o+1),o===e.length-1&&n()}),200*o+100*Math.random())}))}))}(t,"unsubscribe"),e.style.backgroundColor=n,e.style.color="inherit","#search/unsubscribe"!==window.location.hash&&(window.location.hash="#search/unsubscribe",await ut())}(),bt()}]}class Ot extends H{constructor(t){super(),D(this,t,At,Et,i,{})}}function Pt(t,e,n){const r=t.slice();return r[12]=e[n],r[14]=n,r}function Tt(t,e,n){const r=t.slice();return r[15]=e[n],r}function Ct(t){let e;return{c(){e=y("tr"),e.innerHTML='<td colspan="5" class="text-center svelte-rvf7oi">No results to display</td>'},m(t,n){d(t,e,n)},d(t){t&&p(e)}}}function Nt(t){let e,n,r,o=t[6](t[15].when)+"";return{c(){e=v("("),n=v(o),r=v(")")},m(t,o){d(t,e,o),d(t,n,o),d(t,r,o)},p(t,e){1&e&&o!==(o=t[6](t[15].when)+"")&&$(n,o)},d(t){t&&p(e),t&&p(n),t&&p(r)}}}function qt(t){let e,n,r,o,i,c,u,a,s,l=t[15].subject+"",f=t[6](t[15].when).length>0;function m(...e){return t[9](t[15],...e)}let k=f&&Nt(t);return{c(){e=v("ðŸ“§ "),n=y("a"),r=v(l),i=g(),k&&k.c(),c=g(),u=y("br"),w(n,"href",o=t[15].url)},m(t,o){d(t,e,o),d(t,n,o),h(n,r),d(t,i,o),k&&k.m(t,o),d(t,c,o),d(t,u,o),a||(s=b(n,"click",x(m)),a=!0)},p(e,i){t=e,1&i&&l!==(l=t[15].subject+"")&&$(r,l),1&i&&o!==(o=t[15].url)&&w(n,"href",o),1&i&&(f=t[6](t[15].when).length>0),f?k?k.p(t,i):(k=Nt(t),k.c(),k.m(c.parentNode,c)):k&&(k.d(1),k=null)},d(t){t&&p(e),t&&p(n),t&&p(i),k&&k.d(t),t&&p(c),t&&p(u),a=!1,s()}}}function It(t){let e,n,r,o,i,c,u,a,s,l,f,x,k,_,S,L,j,E,A,O,P=t[14]+1+"",T=t[12][0].sender+"";function C(...e){return t[8](t[14],...e)}let N=t[12],q=[];for(let e=0;e<N.length;e+=1)q[e]=qt(Tt(t,N,e));return{c(){e=y("tr"),n=y("td"),r=y("label"),o=y("input"),c=g(),u=y("td"),a=v(P),s=v("."),l=g(),f=y("td"),x=y("label"),k=v(T),_=g(),S=y("br"),L=g(),j=y("label");for(let t=0;t<q.length;t+=1)q[t].c();E=g(),w(o,"type","checkbox"),o.checked=i=t[12].checked,w(o,"id",`i-${t[14]}`),w(o,"name",`i-${t[14]}`),w(r,"for",`i-${t[14]}`),w(r,"class","px-2"),w(n,"class","text-center svelte-rvf7oi"),w(u,"class","text-gray-400 svelte-rvf7oi"),w(x,"for",`i-${t[14]}`),w(x,"class","font-bold"),w(j,"for",`i-${t[14]}`),w(f,"class","svelte-rvf7oi"),w(e,"class","align-top hover:bg-gray-200")},m(t,i){d(t,e,i),h(e,n),h(n,r),h(r,o),h(e,c),h(e,u),h(u,a),h(u,s),h(e,l),h(e,f),h(f,x),h(x,k),h(f,_),h(f,S),h(f,L),h(f,j);for(let t=0;t<q.length;t+=1)q[t].m(j,null);h(e,E),A||(O=b(o,"change",C),A=!0)},p(e,n){if(t=e,1&n&&i!==(i=t[12].checked)&&(o.checked=i),1&n&&T!==(T=t[12][0].sender+"")&&$(k,T),65&n){let e;for(N=t[12],e=0;e<N.length;e+=1){const r=Tt(t,N,e);q[e]?q[e].p(r,n):(q[e]=qt(r),q[e].c(),q[e].m(j,null))}for(;e<q.length;e+=1)q[e].d(1);q.length=N.length}},d(t){t&&p(e),m(q,t),A=!1,O()}}}function Mt(e){let n,r,o;return{c(){n=y("button"),n.textContent="Cancel",w(n,"class","Btn Tertiary")},m(t,e){d(t,n,e),r||(o=b(n,"click",x(wt),!0),r=!0)},p:t,d(t){t&&p(n),r=!1,o()}}}function Bt(e){let n,r,o;return{c(){n=y("button"),n.textContent="Quit",w(n,"class","Btn Tertiary")},m(t,e){d(t,n,e),r||(o=b(n,"click",x(xt),!0),r=!0)},p:t,d(t){t&&p(n),r=!1,o()}}}function Ut(t){let e,n,o,i,c,u,a,s,l,f,k,_,S,L,j,E,A,O,P,T,C,N,q,I,M,B,U,G=(t[0].length||0)+"",R=t[1].length+"",F=0===t[0].length&&Ct(),z=t[0],V=[];for(let e=0;e<z.length;e+=1)V[e]=It(Pt(t,z,e));let D="progress"===t[2]&&Mt(),H="review"===t[2]&&Bt();return{c(){e=y("div"),n=y("table"),o=y("thead"),i=y("tr"),c=y("td"),u=y("input"),a=g(),s=y("td"),l=g(),f=y("td"),k=v("Senders with Unsubscribe Links ("),_=v(G),S=v(")"),L=g(),j=y("tbody"),F&&F.c(),E=g();for(let t=0;t<V.length;t+=1)V[t].c();A=g(),O=y("div"),D&&D.c(),P=g(),H&&H.c(),T=g(),C=y("button"),N=v("Click "),q=v(R),I=v(" Unsubscribe Links"),w(u,"type","checkbox"),u.checked=!0,w(c,"class","text-center svelte-rvf7oi"),w(s,"class","svelte-rvf7oi"),w(f,"class","svelte-rvf7oi"),w(o,"class","font-bold border-b border-gray-300"),w(j,"class","svelte-rvf7oi"),w(n,"class","w-full my-4"),w(e,"class","overflow-y-auto"),C.disabled=M=t[1].length<1,w(C,"class","Btn Primary"),w(O,"class","flex justify-between items-center pt-4 border-t border-gray-300")},m(r,p){d(r,e,p),h(e,n),h(n,o),h(o,i),h(i,c),h(c,u),h(i,a),h(i,s),h(i,l),h(i,f),h(f,k),h(f,_),h(f,S),h(n,L),h(n,j),F&&F.m(j,null),h(j,E);for(let t=0;t<V.length;t+=1)V[t].m(j,null);d(r,A,p),d(r,O,p),D&&D.m(O,null),h(O,P),H&&H.m(O,null),h(O,T),h(O,C),h(C,N),h(C,q),h(C,I),B||(U=[b(u,"change",t[5]),b(C,"click",x(t[3]))],B=!0)},p(t,e){if(1&e&&G!==(G=(t[0].length||0)+"")&&$(_,G),0===t[0].length?F||(F=Ct(),F.c(),F.m(j,E)):F&&(F.d(1),F=null),81&e){let n;for(z=t[0],n=0;n<z.length;n+=1){const r=Pt(t,z,n);V[n]?V[n].p(r,e):(V[n]=It(r),V[n].c(),V[n].m(j,null))}for(;n<V.length;n+=1)V[n].d(1);V.length=z.length}"progress"===t[2]?D?D.p(t,e):(D=Mt(),D.c(),D.m(O,P)):D&&(D.d(1),D=null),"review"===t[2]?H?H.p(t,e):(H=Bt(),H.c(),H.m(O,T)):H&&(H.d(1),H=null),2&e&&R!==(R=t[1].length+"")&&$(q,R),2&e&&M!==(M=t[1].length<1)&&(C.disabled=M)},d(t){t&&p(e),F&&F.d(),m(V,t),t&&p(A),t&&p(O),D&&D.d(),H&&H.d(),B=!1,r(U)}}}function Gt(t){let e,n;return e=new Lt({props:{$$slots:{default:[Ut]},$$scope:{ctx:t}}}),{c(){R(e.$$.fragment)},m(t,r){F(e,t,r),n=!0},p(t,[n]){const r={};262151&n&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){n||(U(e.$$.fragment,t),n=!0)},o(t){G(e.$$.fragment,t),n=!1},d(t){z(e,t)}}}function Rt(t){chrome.runtime.sendMessage({message:"open_new_tabs",urls:t})}function Ft(t,e,n){let r,o;l(t,pt,(t=>n(7,r=t))),l(t,ht,(t=>n(2,o=t))),chrome.runtime.getURL("images/icon128.png");let i=[],c=[];function u(t){n(0,i=i.map(((e,n)=>(n===t&&(e.checked=!e.checked),e))))}return t.$$.update=()=>{128&t.$$.dirty&&n(0,i=function(t){const e=t.reduce(((t,e)=>{const{sender:n,subject:r,when:o,unsubLink:i,url:c}=e,u=n&&n.replace(/[@\.]/g,"");return t[u]||(t[u]=[]),t[u]=[...t[u],{sender:n,subject:r,when:o,unsubLink:i,url:c}],t}),{});return Object.values(e)}(r).map((t=>(t.checked=!0,t)))),1&t.$$.dirty&&n(1,c=i.filter((t=>t.checked))),1&t.$$.dirty&&(i.length,i.length)},[i,c,o,function(){const t=c.map((t=>t[0].unsubLink));c.length>0&&Rt(t)},u,function(t){const e=t.target.checked;n(0,i=i.map(((t,n)=>(t.checked=e,t))))},(t="")=>/\((.*)\)/.test(t)?t.match(/\((.*)\)/)[1]:"",r,(t,e)=>u(t),(t,e)=>Rt([t.url])]}class zt extends H{constructor(t){super(),D(this,t,Ft,Gt,i,{})}}class Vt extends H{constructor(t){super(),D(this,t,null,null,i,{})}}function Dt(t){let e,n;return e=new Ot({}),{c(){R(e.$$.fragment)},m(t,r){F(e,t,r),n=!0},i(t){n||(U(e.$$.fragment,t),n=!0)},o(t){G(e.$$.fragment,t),n=!1},d(t){z(e,t)}}}function Ht(t){let e,n;return e=new zt({}),{c(){R(e.$$.fragment)},m(t,r){F(e,t,r),n=!0},i(t){n||(U(e.$$.fragment,t),n=!0)},o(t){G(e.$$.fragment,t),n=!1},d(t){z(e,t)}}}function Yt(t){let e,n;return e=new zt({}),{c(){R(e.$$.fragment)},m(t,r){F(e,t,r),n=!0},i(t){n||(U(e.$$.fragment,t),n=!0)},o(t){G(e.$$.fragment,t),n=!1},d(t){z(e,t)}}}function Qt(t){let e,n,r,o,i,c,u="start"===t[0]&&Dt(),a="progress"===t[0]&&Ht(),s="review"===t[0]&&Yt();return i=new Vt({}),{c(){e=y("div"),u&&u.c(),n=g(),a&&a.c(),r=g(),s&&s.c(),o=g(),R(i.$$.fragment),w(e,"id","unsubmarine"),w(e,"class","svelte-1w969hk")},m(t,l){d(t,e,l),u&&u.m(e,null),h(e,n),a&&a.m(e,null),h(e,r),s&&s.m(e,null),d(t,o,l),F(i,t,l),c=!0},p(t,[o]){"start"===t[0]?u?1&o&&U(u,1):(u=Dt(),u.c(),U(u,1),u.m(e,n)):u&&(M(),G(u,1,1,(()=>{u=null})),B()),"progress"===t[0]?a?1&o&&U(a,1):(a=Ht(),a.c(),U(a,1),a.m(e,r)):a&&(M(),G(a,1,1,(()=>{a=null})),B()),"review"===t[0]?s?1&o&&U(s,1):(s=Yt(),s.c(),U(s,1),s.m(e,null)):s&&(M(),G(s,1,1,(()=>{s=null})),B())},i(t){c||(U(u),U(a),U(s),U(i.$$.fragment,t),c=!0)},o(t){G(u),G(a),G(s),G(i.$$.fragment,t),c=!1},d(t){t&&p(e),u&&u.d(),a&&a.d(),s&&s.d(),t&&p(o),z(i,t)}}}function Jt(t,e,n){let r;return l(t,ht,(t=>n(0,r=t))),chrome.runtime.onMessage.addListener(((t,e,n)=>{"clicked_browser_extension_icon"===t.message&&(document.removeEventListener("keyup",$t),document.addEventListener("keyup",$t),ht.moveToNextView("start"))})),[r]}return new class extends H{constructor(t){super(),D(this,t,Jt,Qt,i,{})}}({target:document.body})}();
//# sourceMappingURL=bundle.js.map
